<!DOCTYPE html>
<html>
	<head>
		<title>Canvas Test</title>
		<link rel="stylesheet" type="text/css" href="index.css">
	</head>
	<body bgcolor="#000000">
		<div class="title">Canvas Test</div>
		<div class="the_thing">
			<canvas class="game" id="GameCanvas" width="512" height="384"></canvas>
		</div>
		<script type="text/javascript">
			// code taken + adapted from http://beej.us/blog/2010/02/html5s-canvas-part-ii-pixel-manipulation/
		
			function setPixel(imageData, x, y, r, g, b, a) {
			    index = (x + y * imageData.width) * 4;
			    imageData.data[index+0] = r;
			    imageData.data[index+1] = g;
			    imageData.data[index+2] = b;
			    imageData.data[index+3] = a;
			}
		
			element = document.getElementById("GameCanvas");
		    c = element.getContext("2d");
		
			// read the width and height of the canvas
		    width = parseInt(element.getAttribute("width"));
		    height = parseInt(element.getAttribute("height"));

		    // create a new batch of pixels with the same
		    // dimensions as the image:
		    imageData = c.createImageData(width, height);
		
			// draw random dots
			for (i = 0; i < 10000; i++) {
			    x = parseInt(Math.random() * width);
			    y = parseInt(Math.random() * height);
			    r = parseInt(Math.random() * 256);
			    g = parseInt(Math.random() * 256);
			    b = parseInt(Math.random() * 256);
			    setPixel(imageData, x, y, r, g, b, 0xff); // 0xff opaque
			}

			// copy the image data back onto the canvas
			c.putImageData(imageData, 0, 0); // at coords 0,0
		</script>
	</body>
</html>
